<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Climate Closet – Saved Outfits</title>
  <style>
  /*ANIMATION*/
    body {
      amimation: fadeIn 0.4s ease in;
    }

    /*Fade in section smoothly */
    .fade-in {
      animation: fadeIN 0.6s ease forwards;
    }
    /* Slide-up animation for outfit cards */
    .slide-up {
      animation: slideUp 0.5s ease-out forwards;
    }

    /* Fade Animation */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: TranslateY(6px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    /*Slide-up animation*/
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(16px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    
    :root{
      --bg:#0f172a;
      --panel:#111827;
      --text:#e5e7eb;
      --muted:#94a3b8;
      --accent:#22c55e;
      --accent2:#60a5fa;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,Segoe UI,Roboto,Inter,Arial;
      background:var(--bg);
      color:var(--text);
    }
    a{color:inherit;text-decoration:none}
    .wrap{
      max-width:920px;
      margin:0 auto;
      padding:0 16px 48px;
    }
    header{
      border-bottom:1px solid rgba(148,163,184,.25);
      background:#020617;
    }
    .nav{
      max-width:920px;
      margin:0 auto;
      padding:12px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
    }
    .nav-title{
      font-weight:700;
      font-size:18px;
    }
    .nav-links{
      display:flex;
      gap:10px;
      font-size:14px;
    }
    .nav-links a{
      padding:6px 10px;
      border-radius:999px;
      color:var(--muted);
    }
    .nav-links a.active{
      background:rgba(96,165,250,.2);
      color:#e5f0ff;
    }
    h1{
      margin:24px 0 8px;
      font-size:28px;
    }
    p{
      color:var(--muted);
      font-size:14px;
      line-height:1.5;
      max-width:720px;
    }
    .outfit-card {
      background-color: var(--panel);
      border: 1px solid rgba(148,163,184,.2);
      border-radius: 8px;
      padding: 16px;
      margin-top: 16px;
    }
    .outfit-card h2 {
      font-size: 18px;
      margin: 0 0 8px;
    }
    .outfit-card p {
      margin: 4px 0;
    }
  </style>
  <!-- Supabase JS client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.5/+esm" type="module"></script>
</head>
<body>
<header>
  <div class="nav">
    <div class="nav-title">Climate Closet</div>
    <nav class="nav-links">
      <a href="index.html">Home</a>
      <a href="planner.html">Outfit planner</a>
      <a href="saved.html" class="active">Saved Outfits</a>
      <a href="about.html">About</a>
    </nav>
  </div>
</header>

<main class="wrap fade-in">
  <h1>Saved Outfits</h1>
  <p>If you pressed save while viewing any outfits on the planner page, those outfits will appear here.</p>
  
  <div id="outfits-container">
    <p>Loading saved outfits...</p>
  </div>
</main>

<script type="module">
  import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.5/+esm";

  const supabaseUrl = 'https://mmhqtojveavevrwfptzk.supabase.co';
  const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1taHF0b2p2ZWF2ZXZyd2ZwdHprIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwODQxNTgsImV4cCI6MjA3OTY2MDE1OH0.NHzokqO15zt-W5EcJHj-JMhzcGADcv0bwlOEaDQuEW0';
  const supabase = createClient(supabaseUrl, supabaseKey);

  const container = document.getElementById('outfits-container');
  container.innerHTML = '<p>Loading saved outfits...</p>';

  async function loadSavedOutfits() {
    const { data, error } = await supabase
      .from('saved_outfits')
      .select('*')
      .order('id', { ascending: false });

    if (error) {
      container.innerHTML = `<p style="color: red;">Error loading saved outfits: ${error.message}</p>`;
      return;
    }

    if (!data || data.length === 0) {
      container.innerHTML = `<p>No outfits saved yet. Try saving one from the planner page!</p>`;
      return;
    }

    container.innerHTML = ''; // Clear loading message

    data.forEach(({ place, temp_f, context, advice }) => {
      const card = document.createElement('div');
      card.className = 'outfit-card slide-up';
      card.innerHTML = `
        <h2>${place} – ${temp_f}°F</h2>
        <p><strong>Context:</strong> ${context || 'N/A'}</p>
        <p><strong>Advice:</strong> ${advice || 'No advice provided.'}</p>
      `;
      container.appendChild(card);
    });
  }

  loadSavedOutfits();
</script>
</body>
</html>

